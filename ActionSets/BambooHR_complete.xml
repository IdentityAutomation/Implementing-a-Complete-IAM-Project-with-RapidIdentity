<actionDefs xmlns="urn:idauto.net:dss:actiondef">
  <actionDef changeCount="311" modifiedMs="1566316854087" modifiedBy="ed6d4420-44e9-4232-9988-039609164f8b" modifiedByName="Admin" name="BambooHRWebhook" category="" builtIn="false" community="false" returnsValue="true">
    <argDefs>
      <argDef type="string" name="key"/>
      <argDef type="object" name="data"/>
    </argDefs>
    <actions>
      <action id="8EF13B86-6B1A-FB2B-D546-AFBF33426DA9" name="if">
        <arg name="condition" value="key != 'secret'"/>
        <arg name="then">
          <action id="48FF2F43-BD20-54EE-6AD5-AFBF75FBE7D5" name="log">
            <arg name="message" value="&quot;Invalid key used&quot;"/>
            <arg name="level" value="&quot;ERROR&quot;"/>
          </action>
          <action id="41D5EAA8-BF67-1B55-ECB0-AFBFFF940C55" name="createRESTPointResponse" outputVar="response">
            <arg name="statusCode" value="401"/>
          </action>
          <action id="1C7EA77C-FF13-E3C0-7B3D-AFC09822D710" name="return">
            <arg name="value" value="response"/>
          </action>
        </arg>
      </action>
      <action id="97EBA3DC-4DEF-62C4-2FEB-AFC0FC429EEC" name="forEach">
        <arg name="variable" value="employee"/>
        <arg name="collection" value="data.employees"/>
        <arg name="do">
          <action id="1B09EB34-073A-3799-4F44-AFC14322E532" name="ILMBambooHRToMetaDirectory">
            <arg name="key_field" value="&quot;employeeNumber&quot;"/>
            <arg name="key_value" value="employee.fields['Employee #']"/>
          </action>
        </arg>
      </action>
      <action id="42A9CC0E-E01C-1023-BD6E-AFC23FC0C796" name="createRESTPointResponse" outputVar="response">
        <arg name="statusCode" value="200"/>
      </action>
      <action id="FFF0EAD2-B69D-5C0C-C604-AFC23FC26098" name="return">
        <arg name="value" value="response"/>
      </action>
    </actions>
  </actionDef>
  <actionDef changeCount="259" modifiedMs="1563480592435" modifiedBy="ed6d4420-44e9-4232-9988-039609164f8b" modifiedByName="Admin" name="FnGenerateUsername" category="" builtIn="false" community="false" returnsValue="true">
    <argDefs>
      <argDef type="object" name="session"/>
      <argDef type="object" name="record"/>
    </argDefs>
    <actions>
      <action id="5ec511bb-7fe1-46d7-9c01-580092a703d9" name="section">
        <arg name="label" value="Prepare"/>
        <arg name="do">
          <action id="e8559065-0af0-4f1e-a6a7-975e7ba3a372" name="comment">
            <arg name="comment" value="Remove unwanted characters"/>
          </action>
          <action id="e71162ff-b82a-4cab-80ca-68b32fa09095" name="stringReplaceAll" outputVar="givenName">
            <arg name="string" value="record['givenName']"/>
            <arg name="pattern" value="/[\-'\. ]/"/>
          </action>
          <action id="b64586df-389e-485e-aae7-f5b5b16ea357" name="stringReplaceAll" outputVar="sn">
            <arg name="string" value="record['sn']"/>
            <arg name="pattern" value="/[\-'\. ]/"/>
          </action>
          <action id="49A05C5C-722A-5B37-8E36-A507D421D5A6" name="if">
            <arg name="condition" value="record['middleName']"/>
            <arg name="then">
              <action id="C421BAB0-E587-8DD5-4CDB-A507F948E4DB" name="stringReplaceAll" outputVar="middleName">
                <arg name="string" value="record['middleName']"/>
                <arg name="pattern" value="/[\-'\. ]/"/>
              </action>
            </arg>
          </action>
        </arg>
      </action>
      <action id="83043973-e8cf-49c1-b2d6-6e2382cc942e" name="section">
        <arg name="label" value="NamingPatterns"/>
        <arg name="do">
          <action id="7dc4aa01-f576-4dd0-99d7-454b4cf6f755" name="createArray" outputVar="patterns"/>
          <action id="401db56c-03a6-4189-b22c-a74078ed9dec" name="comment">
            <arg name="comment" value="Pattern 1: First initial + last name"/>
          </action>
          <action id="c1bc33a2-1288-45b7-846e-ea2677a06bee" name="appendArrayItem">
            <arg name="array" value="patterns"/>
            <arg name="item" value="givenName.substring(0,1) + sn"/>
          </action>
          <action id="1E585269-7CED-DC72-F659-A508382F6769" name="comment">
            <arg name="comment" value="Pattern 2: First initial + middle initial + last name (if middle name present)"/>
          </action>
          <action id="D45D36A5-1EF6-DBC3-ADA1-A508E6B85B69" name="if">
            <arg name="condition" value="record['middleName']"/>
            <arg name="then">
              <action id="21C6C872-D79E-A85A-E06E-A508382F2068" name="appendArrayItem">
                <arg name="array" value="patterns"/>
                <arg name="item" value="givenName.substring(0,1)+middleName.substring(0,1)+sn"/>
              </action>
            </arg>
          </action>
          <action id="c7fa07d4-84b8-4d95-9ade-598c2d43f2fa" name="comment">
            <arg name="comment" value="Pattern 3+: Additional character of first name + last name"/>
          </action>
          <action id="e098c1a0-6f69-4ab8-b2d7-e244a740f2e3" name="setVariable">
            <arg name="name" value="i"/>
            <arg name="value" value="givenName.length"/>
          </action>
          <action id="8427edc8-28eb-4f57-a0d4-799f6d6d0fa0" name="setVariable">
            <arg name="name" value="j"/>
            <arg name="value" value="2"/>
          </action>
          <action id="67d1fbdc-1d52-44e5-a4af-c325fed947fa" name="while">
            <arg name="condition" value="j &lt;= i"/>
            <arg name="do">
              <action id="8199fa49-e9b4-41f7-ae8c-8e16df70ef7e" name="appendArrayItem">
                <arg name="array" value="patterns"/>
                <arg name="item" value="givenName.substring(0,j) + sn"/>
              </action>
              <action id="c39f806f-80ff-4630-bae6-c77519e19ed6" name="setVariable">
                <arg name="name" value="j"/>
                <arg name="value" value="j + 1"/>
              </action>
            </arg>
          </action>
          <action id="0dbc9564-009f-4426-9609-ceb3c72946e1" name="comment">
            <arg name="comment" value="Final Pattern (Must match Pattern 1)"/>
          </action>
          <action id="52b2b682-169a-4149-964a-459cf2010a90" name="appendArrayItem">
            <arg name="array" value="patterns"/>
            <arg name="item" value="givenName.substring(0,1) + sn"/>
          </action>
        </arg>
      </action>
      <action id="31E4D2C7-79EB-F238-E968-2E8273251CAC" name="section">
        <arg name="label" value="GenerateUniqueName"/>
        <arg name="do">
          <action id="9f5d1370-1ea6-4c47-8046-54362a367343" name="setVariable">
            <arg name="name" value="incremental"/>
            <arg name="value" value="2"/>
          </action>
          <action id="bcbea418-76cf-4fbe-83e9-58cfb20ec5f1" name="setVariable">
            <arg name="name" value="i"/>
            <arg name="value" value="0"/>
          </action>
          <action id="77c697e3-c2f3-4c47-b039-2991d6652a57" name="setVariable">
            <arg name="name" value="verified"/>
            <arg name="value" value="false"/>
          </action>
          <action id="df28373e-1cfa-4342-a49b-7815a37610ff" name="while">
            <arg name="condition" value="!verified"/>
            <arg name="do">
              <action id="7a5aea06-93c7-46c0-ac63-462bb87244d2" name="comment">
                <arg name="comment" value="Set the current pattern"/>
              </action>
              <action id="e21a9608-fc83-44b8-8fdb-233c1d7d2379" name="if">
                <arg name="condition" value="i == 0 || patterns[i] != patterns[0]"/>
                <arg name="then">
                  <action id="5a6ac8f4-f0e6-4946-adb9-b656e9b2e471" name="setVariable">
                    <arg name="name" value="pattern"/>
                    <arg name="value" value="patterns[i].substring(0,20)"/>
                  </action>
                </arg>
                <arg name="else">
                  <action id="1c275efd-7991-420e-818a-9e5d813cf784" name="setVariable">
                    <arg name="name" value="pattern"/>
                    <arg name="value" value="patterns[i].substring(0,20-Number(String(incremental).length)) + incremental"/>
                  </action>
                  <action id="9641f0c1-33a2-4594-a3c6-4cd53c443bc2" name="setVariable">
                    <arg name="name" value="incremental"/>
                    <arg name="value" value="incremental + 1"/>
                  </action>
                </arg>
              </action>
              <action id="90dbad93-7a56-4a92-ba93-e72f8dde822c" name="if">
                <arg name="condition" value="i &lt; patterns.length - 1"/>
                <arg name="then">
                  <action id="0fe90766-289d-4785-868c-80b32fd9eb94" name="setVariable">
                    <arg name="name" value="i"/>
                    <arg name="value" value="i + 1"/>
                  </action>
                </arg>
              </action>
              <action id="aa010ca7-a0f5-4a64-bad1-84c79ad5cd9a" name="comment">
                <arg name="comment" value="Check current pattern for uniqueness"/>
              </action>
              <action id="63EE4B39-06C9-4344-F451-F6187CF163BD" name="getLDAPRecords" outputVar="exists">
                <arg name="ldapConnection" value="session"/>
                <arg name="baseDn" value="Global.metaBaseDN"/>
                <arg name="scope" value="&quot;sub&quot;"/>
                <arg name="filter" value="&quot;(&amp;(|(cn=&quot;+pattern+&quot;)(idautoPersonUserNameMV=&quot;+pattern+&quot;))(!(employeeNumber=&quot;+record['employeeNumber']+&quot;)))&quot;"/>
              </action>
              <action id="aa5b5c11-6d49-4bfe-ac50-ce6e155b8cb8" name="if">
                <arg name="condition" value="!exists[0]"/>
                <arg name="then">
                  <action id="74fbd373-693c-49bd-8496-25da17c0a957" name="setVariable">
                    <arg name="name" value="verified"/>
                    <arg name="value" value="true"/>
                  </action>
                </arg>
              </action>
            </arg>
          </action>
        </arg>
      </action>
      <action id="A73B2AE5-C4C1-A7F6-AFFE-F61A4B93AE75" name="section">
        <arg name="label" value="Result"/>
        <arg name="do">
          <action id="9ecdb514-dbe2-41f2-9360-981530508c03" name="return">
            <arg name="value" value="pattern"/>
          </action>
        </arg>
      </action>
    </actions>
  </actionDef>
  <actionDef changeCount="272" modifiedMs="1563486958213" modifiedBy="ed6d4420-44e9-4232-9988-039609164f8b" modifiedByName="Admin" name="FnHasRecordChanged" category="" builtIn="false" community="false" returnsValue="true" description="Compares two records and returns mismatched fields">
    <argDefs>
      <argDef type="object" name="new_record"/>
      <argDef type="object" name="old_record"/>
    </argDefs>
    <actions>
      <action id="f73c7231-89ba-4ebd-8b97-04a8266942ce" name="section">
        <arg name="suppressTrace" value="true"/>
        <arg name="do">
          <action id="B07F327B-D03D-29D2-26C3-F62EA5A0C719" name="section">
            <arg name="label" value="Variables"/>
            <arg name="do">
              <action id="c93906bc-73b3-4d0b-9132-25ed5fc02fa5" name="setVariable">
                <arg name="name" value="changes"/>
                <arg name="value" value="false"/>
              </action>
            </arg>
          </action>
          <action id="03e61863-9273-4b25-90cb-85248e0055ea" name="section">
            <arg name="label" value="Prepare"/>
            <arg name="do">
              <action id="6f028d2d-9246-48ce-9b3e-1ae0052489a4" name="getRecordFieldNames" outputVar="fields">
                <arg name="record" value="new_record"/>
              </action>
            </arg>
          </action>
          <action id="2fb2dd5f-b40a-4a21-9461-46b9677dcbf2" name="section">
            <arg name="label" value="Iterate"/>
            <arg name="do">
              <action id="5111cba4-9271-48be-a1dd-c9118982b545" name="forEach">
                <arg name="label" value="FieldIterator"/>
                <arg name="variable" value="field"/>
                <arg name="collection" value="fields"/>
                <arg name="do">
                  <action id="6B2D7811-6E56-1396-6238-7B10194278B1" name="setVariable">
                    <arg name="name" value="new_field"/>
                    <arg name="value" value="new_record[field]"/>
                  </action>
                  <action id="580E1E7C-78F6-512A-54BB-7B10470DE738" name="setVariable">
                    <arg name="name" value="old_field"/>
                    <arg name="value" value="old_record[field]"/>
                  </action>
                  <action id="DCA6DAA7-8F43-B763-E5DC-FB2A24A63CB4" name="comment">
                    <arg name="comment" value="Skip if either value is IGNORE"/>
                  </action>
                  <action id="55990B95-340F-882D-2D30-FB2A5DBD634A" name="if">
                    <arg name="condition" value="new_field == &quot;IGNORE&quot; || old_field == &quot;IGNORE&quot;"/>
                    <arg name="then">
                      <action id="96248F66-C85E-0E8C-77B2-FB2A5DBE9B56" name="continue">
                        <arg name="label" value="FieldIterator"/>
                      </action>
                    </arg>
                  </action>
                  <action id="6ab27b9b-db58-4ae6-a00c-bbf96f15b674" name="comment">
                    <arg name="comment" value="Skip if both values are null"/>
                  </action>
                  <action id="b701d000-5de3-424c-a716-a59f77ccdce6" name="if">
                    <arg name="condition" value="new_field == null &amp;&amp; old_field == null"/>
                    <arg name="then">
                      <action id="3823fc72-a3b7-456a-9a49-b9393e74f210" name="continue">
                        <arg name="label" value="FieldIterator"/>
                      </action>
                    </arg>
                  </action>
                  <action id="ef888947-425d-4476-8bae-a34aa1a7434d" name="comment">
                    <arg name="comment" value="Find null values"/>
                  </action>
                  <action id="c45d1673-d895-46f1-ab6f-659ff5d3ed21" name="if">
                    <arg name="condition" value="new_field != null &amp;&amp; old_field == null"/>
                    <arg name="then">
                      <action id="824B8B2D-55DF-C3F0-04A1-7B336036A75B" name="if">
                        <arg name="condition" value="changes"/>
                        <arg name="then">
                          <action id="84EF22B8-4DCA-2825-C1CC-7B3360378C94" name="setVariable">
                            <arg name="name" value="changes[field]"/>
                            <arg name="value" value="changes[field] || {}"/>
                          </action>
                          <action id="6C399CFF-1560-C6B0-6782-7B3360372CBA" name="setVariable">
                            <arg name="name" value="changes[field]['old_value']"/>
                            <arg name="value" value="null"/>
                          </action>
                          <action id="82B6ADCD-6F16-A5A9-C4FB-7B33603809CF" name="setVariable">
                            <arg name="name" value="changes[field]['new_value']"/>
                            <arg name="value" value="new_field"/>
                          </action>
                        </arg>
                        <arg name="else">
                          <action id="50FB7451-4741-56D4-AD19-7B336038DDB8" name="setVariable">
                            <arg name="name" value="changes"/>
                            <arg name="value" value="{}"/>
                          </action>
                          <action id="0CEEC0EC-C54A-9B1A-B8DE-7B336038501C" name="setVariable">
                            <arg name="name" value="changes[field]"/>
                            <arg name="value" value="changes[field] || {}"/>
                          </action>
                          <action id="C717EED1-91A6-4FF8-E341-7B336038F04D" name="setVariable">
                            <arg name="name" value="changes[field]['old_value']"/>
                            <arg name="value" value="null"/>
                          </action>
                          <action id="8D22695D-56A7-4F73-3DFA-7B336039B8D9" name="setVariable">
                            <arg name="name" value="changes[field]['new_value']"/>
                            <arg name="value" value="new_field"/>
                          </action>
                        </arg>
                      </action>
                      <action id="D5B7CEFF-D447-B9AD-17AA-7B264584B0A3" name="continue">
                        <arg name="label" value="FieldIterator"/>
                      </action>
                    </arg>
                  </action>
                  <action id="9ec37f74-f30c-4edd-a3a8-1857c7e29721" name="if">
                    <arg name="condition" value="new_field == null &amp;&amp; old_field != null"/>
                    <arg name="then">
                      <action id="1F9C3290-F150-4AD2-0D3E-7B32CAD85491" name="if">
                        <arg name="condition" value="changes"/>
                        <arg name="then">
                          <action id="1CBBC48E-02C0-66B3-0D0D-7B32CAD8FE47" name="setVariable">
                            <arg name="name" value="changes[field]"/>
                            <arg name="value" value="changes[field] || {}"/>
                          </action>
                          <action id="3000C6C5-0C96-025A-46A3-7B32CAD94EF9" name="setVariable">
                            <arg name="name" value="changes[field]['old_value']"/>
                            <arg name="value" value="old_field"/>
                          </action>
                          <action id="E0D36B8D-51ED-8686-D687-7B32CAD96BD2" name="setVariable">
                            <arg name="name" value="changes[field]['new_value']"/>
                            <arg name="value" value="null"/>
                          </action>
                        </arg>
                        <arg name="else">
                          <action id="DD6C9F45-059B-44A3-28A1-7B32CADAA271" name="setVariable">
                            <arg name="name" value="changes"/>
                            <arg name="value" value="{}"/>
                          </action>
                          <action id="1FE22209-8F58-C07A-3192-7B32CADA14F3" name="setVariable">
                            <arg name="name" value="changes[field]"/>
                            <arg name="value" value="changes[field] || {}"/>
                          </action>
                          <action id="50CEF61C-E1C6-A694-82A6-7B32CADAA027" name="setVariable">
                            <arg name="name" value="changes[field]['old_value']"/>
                            <arg name="value" value="old_field"/>
                          </action>
                          <action id="B1547DE6-DAC1-F955-95C4-7B32CADA154A" name="setVariable">
                            <arg name="name" value="changes[field]['new_value']"/>
                            <arg name="value" value="null"/>
                          </action>
                        </arg>
                      </action>
                      <action id="20F16D81-4584-95C6-6486-7B25A8937824" name="continue">
                        <arg name="label" value="FieldIterator"/>
                      </action>
                    </arg>
                  </action>
                  <action id="43699567-0e4d-4530-9c8f-08c024967bf1" name="comment">
                    <arg name="comment" value="Place values into arrays"/>
                  </action>
                  <action id="9d293f55-a130-4abd-bdd6-54fdb3e68c40" name="getRecordFieldValues" outputVar="new_record_field_values">
                    <arg name="record" value="new_record"/>
                    <arg name="field" value="field"/>
                  </action>
                  <action id="ca6305fc-209d-468f-b0bf-835253c29620" name="getRecordFieldValues" outputVar="old_record_field_values">
                    <arg name="record" value="old_record"/>
                    <arg name="field" value="field"/>
                  </action>
                  <action id="3620d0f6-afd5-4f1b-9038-3223ad1bfb6a" name="comment">
                    <arg name="comment" value="Find fields with different number of values (multi-valued)"/>
                  </action>
                  <action id="03f87231-9479-4ba6-9c07-674b35235340" name="if">
                    <arg name="condition" value="new_record_field_values.length != old_record_field_values.length"/>
                    <arg name="then">
                      <action id="DB73D267-14E5-1433-25E8-7B32A2CE1A80" name="if">
                        <arg name="condition" value="changes"/>
                        <arg name="then">
                          <action id="70943CCF-E07C-EDAD-3E26-7B32A2CF9C97" name="setVariable">
                            <arg name="name" value="changes[field]"/>
                            <arg name="value" value="changes[field] || {}"/>
                          </action>
                          <action id="29FEF44A-8517-5F48-1B71-7B32A2E0F0FB" name="setVariable">
                            <arg name="name" value="changes[field]['old_value']"/>
                            <arg name="value" value="old_field"/>
                          </action>
                          <action id="A4DB4C8E-10D9-D5CD-B530-7B32A2E0E17F" name="setVariable">
                            <arg name="name" value="changes[field]['new_value']"/>
                            <arg name="value" value="new_field"/>
                          </action>
                        </arg>
                        <arg name="else">
                          <action id="BDF005EA-1A3D-7A98-3E4D-7B32A2E1CBEE" name="setVariable">
                            <arg name="name" value="changes"/>
                            <arg name="value" value="{}"/>
                          </action>
                          <action id="9BA1ED68-0922-B339-BB2F-7B32A2E125B8" name="setVariable">
                            <arg name="name" value="changes[field]"/>
                            <arg name="value" value="changes[field] || {}"/>
                          </action>
                          <action id="1F41C234-F9B0-CD63-CC54-7B32A2E1E36D" name="setVariable">
                            <arg name="name" value="changes[field]['old_value']"/>
                            <arg name="value" value="old_field"/>
                          </action>
                          <action id="3256C631-7D2F-80D7-CCE2-7B32A2E1BBE4" name="setVariable">
                            <arg name="name" value="changes[field]['new_value']"/>
                            <arg name="value" value="new_field"/>
                          </action>
                        </arg>
                      </action>
                      <action id="F0FA09C8-9737-7F5E-7E98-7B283A64FC62" name="continue">
                        <arg name="label" value="FieldIterator"/>
                      </action>
                    </arg>
                  </action>
                  <action id="1be83120-eae7-4a8f-9e93-e9baa7e23a81" name="comment">
                    <arg name="comment" value="Compare all values (supports multi-valued attributes)"/>
                  </action>
                  <action id="387dfcd4-58b2-44ad-8b0d-21ff68bf088b" name="sortArray">
                    <arg name="array" value="new_record_field_values"/>
                  </action>
                  <action id="c6ad77bd-f8df-4b79-8ad6-1859e0257202" name="sortArray">
                    <arg name="array" value="old_record_field_values"/>
                  </action>
                  <action id="057990a5-9da5-4afa-8faf-75adc4ea01f8" name="setVariable">
                    <arg name="name" value="i"/>
                    <arg name="value" value="0"/>
                  </action>
                  <action id="477cd8b8-2327-4ef2-9a6c-b5e0dcc8c45a" name="forEach">
                    <arg name="label" value="ValueIterator"/>
                    <arg name="variable" value="new_record_field_value"/>
                    <arg name="collection" value="new_record_field_values"/>
                    <arg name="do">
                      <action id="17b88f6f-3d68-4a2d-8b37-f9c8a06c5521" name="comment">
                        <arg name="comment" value="Find different values"/>
                      </action>
                      <action id="8aae4265-d252-430b-86ee-4ac3f17ca8bd" name="if">
                        <arg name="condition" value="String(new_record_field_value).toLowerCase() != String(old_record_field_values[i]).toLowerCase()"/>
                        <arg name="then">
                          <action id="07F5C5D8-A16D-1EDA-6584-7B2865EE8960" name="if">
                            <arg name="condition" value="changes"/>
                            <arg name="then">
                              <action id="C2EA7813-DD77-810B-5FF8-7B2DC764E7EE" name="setVariable">
                                <arg name="name" value="changes[field]"/>
                                <arg name="value" value="changes[field] || {}"/>
                              </action>
                              <action id="0824ECFA-8AD1-18AE-801E-7B30ED8CCBA7" name="setVariable">
                                <arg name="name" value="changes[field]['old_value']"/>
                                <arg name="value" value="old_field"/>
                              </action>
                              <action id="76F33D1E-D12A-C03E-B3CE-7B2865EF5DA6" name="setVariable">
                                <arg name="name" value="changes[field]['new_value']"/>
                                <arg name="value" value="new_field"/>
                              </action>
                            </arg>
                            <arg name="else">
                              <action id="1B2B48B7-694E-FD6C-1B46-7B2865EFB47C" name="setVariable">
                                <arg name="name" value="changes"/>
                                <arg name="value" value="{}"/>
                              </action>
                              <action id="3B0E06D4-0CC9-09EA-C1A3-7B2EC60D2FB6" name="setVariable">
                                <arg name="name" value="changes[field]"/>
                                <arg name="value" value="changes[field] || {}"/>
                              </action>
                              <action id="4140E311-B020-C352-BA36-7B311CF5F52E" name="setVariable">
                                <arg name="name" value="changes[field]['old_value']"/>
                                <arg name="value" value="old_field"/>
                              </action>
                              <action id="5D19A1DD-F290-2930-16C6-7B311CF6F124" name="setVariable">
                                <arg name="name" value="changes[field]['new_value']"/>
                                <arg name="value" value="new_field"/>
                              </action>
                            </arg>
                          </action>
                          <action id="60D537A3-C5ED-A21D-E7DB-7B2865EFC61D" name="continue">
                            <arg name="label" value="ValueIterator"/>
                          </action>
                        </arg>
                      </action>
                      <action id="7432b7de-1a67-4b57-bf0b-cd87ade3230e" name="setVariable">
                        <arg name="name" value="i"/>
                        <arg name="value" value="i + 1"/>
                      </action>
                    </arg>
                  </action>
                  <action id="fbe4e938-ef34-4f09-8504-8144c6b3c27e" name="section">
                    <arg name="do"/>
                  </action>
                </arg>
              </action>
            </arg>
          </action>
          <action id="34A41FBB-4D36-C193-AC49-F62E766981A2" name="section">
            <arg name="label" value="Result"/>
            <arg name="do">
              <action id="fb00d80c-7023-4ab5-89b0-34df691d1484" name="return">
                <arg name="value" value="changes"/>
              </action>
            </arg>
          </action>
        </arg>
      </action>
    </actions>
  </actionDef>
  <actionDef changeCount="312" modifiedMs="1566317008378" modifiedBy="ed6d4420-44e9-4232-9988-039609164f8b" modifiedByName="Admin" name="ILMBambooHRToMetaDirectory" category="" builtIn="false" community="false" returnsValue="true">
    <argDefs>
      <argDef optional="true" type="string" name="key_field"/>
      <argDef optional="true" type="string" name="key_value"/>
      <argDef optional="true" type="enum:true,false" name="log_only"/>
      <argDef optional="true" type="object" name="assertion"/>
    </argDefs>
    <actions>
      <action id="D9713A6F-D22B-17B1-BC02-F60741058CF5" name="section">
        <arg name="label" value="Variables"/>
        <arg name="do">
          <action id="3CCC2860-BAE2-4816-3982-0694A33294CC" name="setVariable">
            <arg name="name" value="counterTotal"/>
            <arg name="value" value="0"/>
          </action>
          <action id="5BFACDAF-3B19-94F4-797F-06A4811114D7" name="setVariable">
            <arg name="name" value="counterSkipped"/>
            <arg name="value" value="0"/>
          </action>
          <action id="CA9AAF4B-E087-108C-1BF5-0724104F2207" name="setVariable">
            <arg name="name" value="counterAdded"/>
            <arg name="value" value="0"/>
          </action>
          <action id="6F88F6EF-AA2B-755B-97A4-07242B08BC63" name="setVariable">
            <arg name="name" value="counterUpdated"/>
            <arg name="value" value="0"/>
          </action>
          <action id="C0A4DF99-AB78-D767-6920-0ABD6DB65CE6" name="setVariable">
            <arg name="name" value="counterEnabled"/>
            <arg name="value" value="0"/>
          </action>
          <action id="752E2D0C-3781-B37C-40A3-0ABD9428EC5F" name="setVariable">
            <arg name="name" value="counterDisabled"/>
            <arg name="value" value="0"/>
          </action>
        </arg>
      </action>
      <action id="63905FC0-9D5A-979A-5F87-F607410704BB" name="section">
        <arg name="label" value="Connect"/>
        <arg name="do">
          <action id="C5D1C8B6-FA27-674F-576F-068105ECCBBC" name="DefineBambooHRConnection" outputVar="sessionHR">
            <arg name="apiKey" value="Global.hrApiKey"/>
            <arg name="tenant" value="Global.hrTenant"/>
          </action>
          <action id="80D1EBDE-1009-CE35-F43C-068C99983F41" name="openLDAPConnection" outputVar="sessionMeta">
            <arg name="ldapHost" value="Global.metaHost"/>
            <arg name="ldapPort" value="Global.metPort"/>
            <arg name="useSSL" value="Global.metaSSL"/>
            <arg name="userDn" value="Global.metaUser"/>
            <arg name="password" value="Global.metaPwd"/>
          </action>
          <action id="DF68DB4C-FE77-8C7D-AAB3-0692874A947E" name="if">
            <arg name="condition" value="!sessionMeta"/>
            <arg name="then">
              <action id="F0431011-EF69-B4B3-2220-0692C0B2FFAB" name="log">
                <arg name="message" value="&quot;Unable to connect to MetaDirectory&quot;"/>
                <arg name="level" value="&quot;ERROR&quot;"/>
              </action>
              <action id="A8E4C153-8ABC-CDA5-BA46-0692EE1A5D72" name="return"/>
            </arg>
          </action>
        </arg>
      </action>
      <action id="66670E6E-CBBB-00B8-5ED1-F6074108C3E9" name="section">
        <arg name="label" value="Query"/>
        <arg name="do">
          <action id="E645F60C-CFF6-99D3-D947-0ACFCCE6D578" name="section">
            <arg name="label" value="Testing"/>
            <arg name="do">
              <action id="DAB62A9F-4DD0-D542-43CE-0ACFEC273D73" name="section">
                <arg name="label" value="Validate"/>
                <arg name="do">
                  <action id="B088E5ED-ACBD-E579-3A33-0AD00776A055" name="if">
                    <arg name="condition" value="!assertion"/>
                    <arg name="then">
                      <action id="98C0CA12-C50A-0647-0B68-0AD027E72CC5" name="break">
                        <arg name="label" value="Testing"/>
                      </action>
                    </arg>
                  </action>
                </arg>
              </action>
              <action id="BE685004-8AD9-0261-3E26-0AFE7C38BA64" name="setVariable">
                <arg name="name" value="records"/>
                <arg name="value" value="[]"/>
              </action>
              <action id="B07F7DF3-7966-109E-40BB-0BB57A5CF825" name="createRecordFromObject" outputVar="recordInput">
                <arg name="seed" value="assertion.input"/>
              </action>
              <action id="40163A36-7903-5C2F-664D-0AFEC9804A3A" name="appendArrayItem">
                <arg name="array" value="records"/>
                <arg name="item" value="recordInput"/>
              </action>
              <action id="ED547DC6-306A-2F62-1155-0AD1606760D7" name="break">
                <arg name="label" value="Query"/>
              </action>
            </arg>
          </action>
          <action id="ED599D34-13F6-1E38-1F59-06812886133E" name="GetBambooHREmployeeRecords" outputVar="records">
            <arg name="session" value="sessionHR"/>
          </action>
        </arg>
      </action>
      <action id="C5A87C10-422B-6470-2E3C-F60741097849" name="section">
        <arg name="label" value="Iterate"/>
        <arg name="do">
          <action id="1E2BDC21-33F1-ED85-317F-F60741091CA3" name="forEach">
            <arg name="label" value="IterateRecords"/>
            <arg name="variable" value="record"/>
            <arg name="collection" value="records"/>
            <arg name="do">
              <action id="64128F60-A05C-B522-71C3-0AC14316CC7F" name="section">
                <arg name="label" value="Validate"/>
                <arg name="do">
                  <action id="B576E9FD-3540-6D3F-943B-0AC175D79D91" name="if">
                    <arg name="condition" value="record[key_field] != key_value"/>
                    <arg name="then">
                      <action id="20575552-4A7D-66CD-03FC-0AC20E3689C1" name="continue">
                        <arg name="label" value="IterateRecords"/>
                      </action>
                    </arg>
                  </action>
                  <action id="91B0E895-5E36-52FC-070A-0694E70ACB80" name="setVariable">
                    <arg name="name" value="counterTotal"/>
                    <arg name="value" value="counterTotal + 1"/>
                  </action>
                </arg>
              </action>
              <action id="9211A2ED-CA90-FE41-CAAF-F607410A375E" name="section">
                <arg name="label" value="Transform"/>
                <arg name="do">
                  <action id="C068231D-66CA-B75C-D54C-06958A1A7C4D" name="comment">
                    <arg name="comment" value="Schema Mappings"/>
                  </action>
                  <action id="0EA1BDF8-DD8E-C8F9-BB38-0695B53A1358" name="renameRecordFields">
                    <arg name="record" value="record"/>
                    <arg name="oldFields" value="&quot;firstName, lastName, middleName, dataOfBirth, department, division, employeeNumber, employeeHistoryStatus, hireDate, homeEmail, jobTitle, location, mobilePhone, preferredName, ssn, status, supervisorId, terminationDate, workEmail, workPhone&quot;"/>
                    <arg name="newFields" value="&quot;givenName, sn, idautoPersonMiddleInitial, idautoPersonBirthdate, idautoPersonDeptDescr, idautoPersonDivisionCode, employeeNumber, employeeType, idautoPersonHireDate, idautoPersonContactEmail, idautoPersonPositionDescr, l, mobile, idautoPersonPreferredName, idautoPersonNationalID, idautoStatus, idautoPersonManagerID, idautoPersonTermDate, mail, telephoneNumber&quot;"/>
                  </action>
                  <action id="BA091BAD-9629-CD33-4933-069771D18D60" name="comment">
                    <arg name="comment" value="Filter Fields"/>
                  </action>
                  <action id="433C25C9-71BA-96DA-DC8D-0697D67A36C9" name="filterRecordFields">
                    <arg name="record" value="record"/>
                    <arg name="fields" value="&quot;givenName, sn, idautoPersonMiddleInitial, idautoPersonBirthdate, idautoPersonDeptDescr, idautoPersonDivisionCode, employeeNumber, employeeType, idautoPersonHireDate, idautoPersonContactEmail, idautoPersonPositionDescr, l, mobile, idautoPersonPreferredName, idautoPersonNationalID, idautoStatus, idautoPersonManagerID, idautoPersonTermDate, mail, telephoneNumber&quot;"/>
                  </action>
                  <action id="D2B670EC-31FD-7359-1B43-0698F6B0A3A5" name="comment">
                    <arg name="comment" value="Placement"/>
                  </action>
                  <action id="940FF2CD-AB34-C0E5-C61F-069928726BD4" name="setVariable">
                    <arg name="name" value="newContext"/>
                    <arg name="value" value="Global.metaUserBaseDN"/>
                  </action>
                  <action id="681BE43F-7AED-346E-E5B4-0699F7C96C44" name="comment">
                    <arg name="comment" value="Default Values"/>
                  </action>
                  <action id="E5ED510A-80DE-1379-4F9A-069A272232B0" name="setRecordFieldValue">
                    <arg name="record" value="record"/>
                    <arg name="field" value="&quot;displayName&quot;"/>
                    <arg name="value" value="record.givenName + &quot; &quot; + record.sn"/>
                  </action>
                  <action id="A0A9B8B3-8B7E-67B4-F456-07067FC3DD62" name="comment">
                    <arg name="comment" value="Encrypted Values"/>
                  </action>
                  <action id="345EBBF3-43DA-2DE2-59A6-070705E20BBB" name="cryptPassword" outputVar="record.idautoPersonNationalID">
                    <arg name="password" value="record.idautoPersonNationalID"/>
                    <arg name="algorithm" value="&quot;MD5&quot;"/>
                    <arg name="salt" value="Global.encryptionSalt"/>
                  </action>
                </arg>
              </action>
              <action id="494B2792-3145-0EF7-5A7D-F607410B019B" name="section">
                <arg name="label" value="Match"/>
                <arg name="do">
                  <action id="EF286D22-C06F-4728-74CB-0AD47B6F3295" name="section">
                    <arg name="label" value="Testing"/>
                    <arg name="do">
                      <action id="0DC2EB00-579A-CEA3-87C6-0AD4A89F3D4D" name="section">
                        <arg name="label" value="Validate"/>
                        <arg name="do">
                          <action id="1970970A-3E6B-3FC7-515E-0AD4A8A005B5" name="if">
                            <arg name="condition" value="!assertion"/>
                            <arg name="then">
                              <action id="0BFAABA3-6881-0E49-BA41-0AD4A8A1CFA5" name="break">
                                <arg name="label" value="Testing"/>
                              </action>
                            </arg>
                          </action>
                        </arg>
                      </action>
                      <action id="A8DDF660-3B76-E94B-89F1-0AD52EE76463" name="setVariable">
                        <arg name="name" value="exists"/>
                        <arg name="value" value="[]"/>
                      </action>
                      <action id="AB537752-F2EA-8685-7FA1-0BB2B32C6E02" name="if">
                        <arg name="condition" value="!assertion.exists"/>
                        <arg name="then">
                          <action id="E1FE4432-896F-7309-65BB-0BB2E67C2E6E" name="break">
                            <arg name="label" value="Match"/>
                          </action>
                        </arg>
                      </action>
                      <action id="971AC4F6-79BF-E523-C477-0BB30FE4975D" name="createRecordFromObject" outputVar="recordExists">
                        <arg name="seed" value="assertion.exists"/>
                      </action>
                      <action id="2C00AC35-F3F9-7923-CEBE-0BB3501C9348" name="appendArrayItem">
                        <arg name="array" value="exists"/>
                        <arg name="item" value="recordExists"/>
                      </action>
                      <action id="C4683C42-921F-7B89-1B7A-0AD4E80F7F19" name="break">
                        <arg name="label" value="Match"/>
                      </action>
                    </arg>
                  </action>
                  <action id="826C70FA-6A33-0086-B6A2-069FA121049F" name="getLDAPRecords" outputVar="exists">
                    <arg name="ldapConnection" value="sessionMeta"/>
                    <arg name="baseDn" value="Global.metaBaseDN"/>
                    <arg name="scope" value="&quot;sub&quot;"/>
                    <arg name="filter" value="&quot;(employeeNumber=&quot; + record.employeeNumber + &quot;)&quot;"/>
                    <arg name="attributes" value="&quot;*, +&quot;"/>
                  </action>
                  <action id="1D675EB1-9F5F-2FD2-C860-06A1702A2BE8" name="if">
                    <arg name="condition" value="!exists"/>
                    <arg name="then">
                      <action id="C25020DD-3015-7C26-8D10-06A1D17A3F92" name="log">
                        <arg name="message" value="&quot;Unable to query MetaDirectory for match&quot;"/>
                        <arg name="level" value="&quot;ERROR&quot;"/>
                      </action>
                      <action id="2524E691-3291-7163-A3A5-06A20AA2E3E7" name="return"/>
                    </arg>
                  </action>
                </arg>
              </action>
              <action id="CAC8C091-5608-7504-2F1C-F607410CE43E" name="section">
                <arg name="label" value="Operations"/>
                <arg name="do">
                  <action id="41069F30-71A1-750B-BD03-F607410DC6AC" name="section">
                    <arg name="label" value="Add"/>
                    <arg name="do">
                      <action id="852DCB4E-4C2A-1ECC-43ED-F607410DFBDF" name="section">
                        <arg name="label" value="Validate"/>
                        <arg name="do">
                          <action id="E7A87CA1-9C5C-2564-2DD1-06A2951A2D1D" name="if">
                            <arg name="condition" value="exists.length > 0"/>
                            <arg name="then">
                              <action id="52DC3629-28EA-4718-DC7C-06A2D5DABEDE" name="break">
                                <arg name="label" value="Add"/>
                              </action>
                            </arg>
                          </action>
                          <action id="84399F97-A5E5-543F-69E6-06A39BFA5DD0" name="if">
                            <arg name="condition" value="!record.employeeNumber || !record.givenName || !record.sn"/>
                            <arg name="then">
                              <action id="37DE2659-99EA-23CA-9B9D-06A4194A136A" name="log">
                                <arg name="message" value="&quot;Skipping add due to lack of data&quot;"/>
                                <arg name="level" value="&quot;WARN&quot;"/>
                              </action>
                              <action id="863B7598-B2F7-AEE7-79B7-06F4A9E6BCA3" name="log">
                                <arg name="message" value="record"/>
                                <arg name="level" value="&quot;DEBUG&quot;"/>
                              </action>
                              <action id="EFD4B823-89CD-B747-0D3B-06A4F79B2BDC" name="setVariable">
                                <arg name="name" value="counterSkipped"/>
                                <arg name="value" value="counterSkipped + 1"/>
                              </action>
                              <action id="711DDCF5-A07D-F7E3-77EB-06A5569A2BF0" name="continue">
                                <arg name="label" value="IterateRecords"/>
                              </action>
                            </arg>
                          </action>
                          <action id="CEAAFB8C-2BCB-177C-F6D2-06A5D622586E" name="if">
                            <arg name="condition" value="record.idautoStatus != &quot;Active&quot;"/>
                            <arg name="then">
                              <action id="FE58E0D9-1049-4577-83B6-06F4C43609FC" name="log">
                                <arg name="message" value="record"/>
                                <arg name="level" value="&quot;DEBUG&quot;"/>
                              </action>
                              <action id="8D14DCFF-FF96-20E2-590F-06A611A00638" name="setVariable">
                                <arg name="name" value="counterSkipped"/>
                                <arg name="value" value="counterSkipped + 1"/>
                              </action>
                              <action id="AD529348-F043-2A5D-7336-06A61BF2F5C2" name="continue">
                                <arg name="label" value="IterateRecords"/>
                              </action>
                            </arg>
                          </action>
                        </arg>
                      </action>
                      <action id="4CAE6156-46E6-6396-6F6A-F607410E6D9F" name="section">
                        <arg name="label" value="Transform"/>
                        <arg name="do">
                          <action id="45F2E89E-9ADA-677D-E652-06FC240E3BD2" name="setRecordFieldValues">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;objectClass&quot;"/>
                            <arg name="values" value="[&quot;inetOrgPerson&quot;, &quot;idautoObject&quot;, &quot;idautoPerson&quot;]"/>
                          </action>
                          <action id="7E2C092C-7671-54DA-EB22-06B5F5A308FD" name="FnGenerateUsername" outputVar="username">
                            <arg name="session" value="sessionMeta"/>
                            <arg name="record" value="record"/>
                          </action>
                          <action id="0F53242B-6CC1-D4B0-0D6E-06B665CB19FD" name="setVariable">
                            <arg name="name" value="guid"/>
                            <arg name="value" value="java.util.UUID.randomUUID().toString()"/>
                          </action>
                          <action id="ECF2913D-4CC8-D3C2-61CD-06B8435F1C4F" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;idautoID&quot;"/>
                            <arg name="value" value="guid"/>
                          </action>
                          <action id="1B8E1FB6-4056-D1BB-4998-06B72B947305" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;@dn&quot;"/>
                            <arg name="value" value="&quot;cn=&quot; + guid + &quot;,&quot; + newContext"/>
                          </action>
                          <action id="2087D7BC-0984-B9FC-33AA-06BC1C4CBDC2" name="setRecordFieldValues">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;idautoPersonUserNameMV&quot;"/>
                            <arg name="values" value="[record.employeeNumber, username, record.idautoPersonContactEmail]"/>
                          </action>
                          <action id="29282315-509C-F6D5-417F-06BAAECCEC33" name="comment">
                            <arg name="comment" value="TODO use password policy to generate initial password"/>
                          </action>
                          <action id="CFDD0795-E14E-D472-6823-06B7E161750C" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;userPassword&quot;"/>
                            <arg name="value" value="guid"/>
                          </action>
                          <action id="DDF08378-59E6-F1D2-5A1D-06B940E92F94" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;idautoPersonDefaultPassword&quot;"/>
                            <arg name="value" value="guid"/>
                          </action>
                          <action id="182088E8-2C2B-15B7-29FF-06BAFDA70426" name="comment">
                            <arg name="comment" value="TODO use password policy to generate claim code"/>
                          </action>
                          <action id="2EB0D50C-7BFB-331E-961A-06BA4EA90A72" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;idautoPersonClaimCode&quot;"/>
                            <arg name="value" value="&quot;99999999&quot;"/>
                          </action>
                          <action id="8BDB0FC1-5715-D2D3-7EC8-070C13E87BFA" name="if">
                            <arg name="condition" value="!record.idautoPersonContactEmail"/>
                            <arg name="then">
                              <action id="799FA7F7-AF59-CF6C-0B16-070C6115A0F1" name="hashString" outputVar="emailHash">
                                <arg name="data" value="&quot;tmoreland@idauto.net&quot;"/>
                                <arg name="algorithm" value="&quot;MD5&quot;"/>
                              </action>
                            </arg>
                            <arg name="else">
                              <action id="82A4FCCC-1897-3FF3-D281-070B3BF0DAAC" name="hashString" outputVar="emailHash">
                                <arg name="data" value="record.idautoPersonContactEmail"/>
                                <arg name="algorithm" value="&quot;MD5&quot;"/>
                              </action>
                            </arg>
                          </action>
                          <action id="0754CF8C-7D72-E68B-9A3B-06BB84941C9F" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;idautoPersonPhotoURL&quot;"/>
                            <arg name="value" value="&quot;https://www.gravatar.com/avatar/&quot; + emailHash + &quot;?s=65&quot;"/>
                          </action>
                          <action id="AC4F4FAB-20B4-182E-CB30-0BEC38F85829" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;idautoPersonAffiliations&quot;"/>
                            <arg name="value" value="&quot;Employee&quot;"/>
                          </action>
                        </arg>
                      </action>
                      <action id="6CC05520-FC3C-04BC-E4B5-F607410FD847" name="section">
                        <arg name="label" value="Save"/>
                        <arg name="do">
                          <action id="ED86EE9E-82AE-E4A3-C47C-0AD5993103CB" name="section">
                            <arg name="label" value="Testing"/>
                            <arg name="do">
                              <action id="2ADB644E-3F65-C287-044B-0AD59932DAC2" name="section">
                                <arg name="label" value="Validate"/>
                                <arg name="do">
                                  <action id="65316BFF-C362-381A-657B-0AD59938079A" name="if">
                                    <arg name="condition" value="!assertion"/>
                                    <arg name="then">
                                      <action id="3A497AE9-7CFC-E9BB-AEEA-0AD59939A874" name="break">
                                        <arg name="label" value="Testing"/>
                                      </action>
                                    </arg>
                                  </action>
                                </arg>
                              </action>
                              <action id="483A7058-5214-EEAF-99B7-0AD615B73D50" name="return">
                                <arg name="value" value="record"/>
                              </action>
                              <action id="A5412FB7-C494-61A6-0C69-0AF0ED778A12" name="continue">
                                <arg name="label" value="IterateRecords"/>
                              </action>
                            </arg>
                          </action>
                          <action id="7864AB47-917F-CAB4-68D3-0AC3E33F974E" name="section">
                            <arg name="label" value="LogOnly"/>
                            <arg name="do">
                              <action id="FB41937A-E0CC-2985-09DD-0AC40B8747FE" name="if">
                                <arg name="condition" value="!log_only"/>
                                <arg name="then">
                                  <action id="3002D9A3-7B0F-C122-2C85-0AC43EF86254" name="break">
                                    <arg name="label" value="LogOnly"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="119E3A4E-08EE-01D6-6405-0AC45C4F72EB" name="log">
                                <arg name="message" value="&quot;ADD: &quot; + record"/>
                                <arg name="level" value="&quot;INFO&quot;"/>
                              </action>
                              <action id="6EF9BE3C-284E-6127-FAFD-0AC4BC2F0151" name="continue">
                                <arg name="label" value="IterateRecords"/>
                              </action>
                            </arg>
                          </action>
                          <action id="99B0821D-844C-2281-A7B1-06F9B5866CC1" name="saveLDAPRecord" outputVar="result">
                            <arg name="ldapConnection" value="sessionMeta"/>
                            <arg name="record" value="record"/>
                          </action>
                          <action id="1A50892F-C428-998A-0247-06F9E2266B01" name="if">
                            <arg name="condition" value="result"/>
                            <arg name="then">
                              <action id="899B4F95-5974-37CC-EDD9-072461693453" name="setVariable">
                                <arg name="name" value="counterAdded"/>
                                <arg name="value" value="counterAdded + 1"/>
                              </action>
                              <action id="EA454FB3-07A1-C453-0ABF-06A6B9FB48C5" name="log">
                                <arg name="message" value="&quot;Add saved.&quot;"/>
                                <arg name="level" value="&quot;TRACE&quot;"/>
                              </action>
                              <action id="38F807B8-2F36-A9BA-F247-0AAA3C685917" name="logAuditEvent">
                                <arg name="eventName" value="&quot;createAccount&quot;"/>
                                <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                <arg name="targetID" value="record.idautoID"/>
                                <arg name="target" value="record['@dn']"/>
                                <arg name="perpetratorDN" value="Global.metaUser"/>
                                <arg name="successful" value="true"/>
                                <arg name="extendedProperties" value="record"/>
                              </action>
                            </arg>
                            <arg name="else">
                              <action id="5627C47E-8868-2E9B-B3D2-06FA35B0C62A" name="log">
                                <arg name="message" value="&quot;Add failed&quot;"/>
                                <arg name="level" value="&quot;ERROR&quot;"/>
                              </action>
                              <action id="7E0E10AD-6A86-2DF5-676B-06FA8044C860" name="log">
                                <arg name="message" value="record"/>
                                <arg name="level" value="&quot;ERROR&quot;"/>
                              </action>
                              <action id="09345132-C138-3B38-FCBD-0AACF6DC9AC8" name="logAuditEvent">
                                <arg name="eventName" value="&quot;createAccount&quot;"/>
                                <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                <arg name="targetID" value="record.idautoID"/>
                                <arg name="target" value="record['@dn']"/>
                                <arg name="perpetratorDN" value="Global.metaUser"/>
                                <arg name="successful" value="false"/>
                                <arg name="extendedProperties" value="record"/>
                              </action>
                            </arg>
                          </action>
                        </arg>
                      </action>
                      <action id="C8F5D2FF-59FC-1EF7-A320-07231DD1E36A" name="continue">
                        <arg name="label" value="IterateRecords"/>
                      </action>
                    </arg>
                  </action>
                  <action id="C41CC7BC-F8E9-1F3B-756E-F607411052D7" name="section">
                    <arg name="label" value="Update"/>
                    <arg name="do">
                      <action id="1DD26E6A-83C5-BA63-FC92-F6074111E40F" name="section">
                        <arg name="label" value="Validate"/>
                        <arg name="do">
                          <action id="9F7FD698-AA0C-C475-3CF7-07164BF82742" name="FnHasRecordChanged" outputVar="changes">
                            <arg name="new_record" value="record"/>
                            <arg name="old_record" value="exists[0]"/>
                          </action>
                          <action id="EF602F86-24ED-DC31-D965-0AB4BEB7992D" name="log">
                            <arg name="message" value="changes"/>
                            <arg name="color" value="&quot;brown&quot;"/>
                          </action>
                          <action id="61150BFA-D625-CBF9-A48D-071733BF7AE7" name="if">
                            <arg name="condition" value="!changes"/>
                            <arg name="then">
                              <action id="1DAEF31F-3361-20D9-4184-0717D9024AA4" name="setVariable">
                                <arg name="name" value="counterSkipped"/>
                                <arg name="value" value="counterSkipped + 1"/>
                              </action>
                              <action id="E1A3621D-7763-2C47-EC90-071815772A21" name="continue">
                                <arg name="label" value="IterateRecords"/>
                              </action>
                            </arg>
                          </action>
                        </arg>
                      </action>
                      <action id="D776188B-BAB0-5520-4BE2-F607411201CA" name="section">
                        <arg name="label" value="Transform"/>
                        <arg name="do">
                          <action id="2FA0DB14-5218-9DE7-9C64-071932CF0603" name="setRecordFieldValue">
                            <arg name="record" value="record"/>
                            <arg name="field" value="&quot;@dn&quot;"/>
                            <arg name="value" value="exists[0]['@dn']"/>
                          </action>
                          <action id="330DCDF4-FC34-C5AE-F356-0BED1B9FAAF7" name="getRecordFieldValues" outputVar="affiliations">
                            <arg name="record" value="exists[0]"/>
                            <arg name="field" value="&quot;idautoPersonAffiliations&quot;"/>
                          </action>
                          <action id="76F401CF-BC9D-D37D-EF9C-0BEDB100D48F" name="appendArrayItem">
                            <arg name="array" value="affiliations"/>
                            <arg name="item" value="&quot;Employee&quot;"/>
                          </action>
                          <action id="6C6887E1-FB45-F013-7E4F-071AD65790A4" name="section">
                            <arg name="label" value="StatusChange"/>
                            <arg name="do">
                              <action id="2667ACD0-BE9C-5B33-FBAF-071B084F59B0" name="section">
                                <arg name="label" value="Validate"/>
                                <arg name="do">
                                  <action id="0542AE7D-BF08-8894-104C-071B2017FA8E" name="if">
                                    <arg name="condition" value="record.idautoStatus == exists[0].idautoStatus"/>
                                    <arg name="then">
                                      <action id="B0622104-48AD-E43B-1D4A-071B7A472D70" name="break">
                                        <arg name="label" value="StatusChange"/>
                                      </action>
                                    </arg>
                                  </action>
                                  <action id="C331579B-5CB5-9089-83A2-0AAF39D7B198" name="setVariable">
                                    <arg name="name" value="setEnabled"/>
                                    <arg name="value" value="false"/>
                                  </action>
                                  <action id="F6521DB8-D157-68AF-1F2E-0AAF5E96302F" name="setVariable">
                                    <arg name="name" value="setDisabled"/>
                                    <arg name="value" value="false"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="068E8BEB-EBC2-02C3-ACF9-071BF01F1ABC" name="section">
                                <arg name="label" value="HandleEnable"/>
                                <arg name="do">
                                  <action id="4A26BE57-4A1A-519B-178A-071C47E7DDFD" name="section">
                                    <arg name="label" value="Validate"/>
                                    <arg name="do">
                                      <action id="1C2DF8D8-3D9C-4EE2-2D99-071C64F9A91C" name="if">
                                        <arg name="condition" value="record.idautoStatus != &quot;Active&quot;"/>
                                        <arg name="then">
                                          <action id="3D3AC440-A4D4-C30D-9E16-071CA46F2B67" name="break">
                                            <arg name="label" value="HandleEnable"/>
                                          </action>
                                        </arg>
                                      </action>
                                    </arg>
                                  </action>
                                  <action id="4D5125D9-4DC8-CAC0-B056-071CD7AFCFFB" name="setRecordFieldValue">
                                    <arg name="record" value="record"/>
                                    <arg name="field" value="&quot;idautoDisabled&quot;"/>
                                    <arg name="value" value="false"/>
                                  </action>
                                  <action id="BC79F3C4-CEE2-A9DD-F832-0AAFA069983D" name="setVariable">
                                    <arg name="name" value="setEnabled"/>
                                    <arg name="value" value="true"/>
                                  </action>
                                  <action id="D35A80A3-CEF7-3073-E8C4-071DA2006C36" name="break">
                                    <arg name="label" value="StatusChange"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="6352ABA3-95CD-C460-A1C9-071C24EFFA31" name="section">
                                <arg name="label" value="HandleDisable"/>
                                <arg name="do">
                                  <action id="D52D56E0-F466-B557-B37D-071DC75289BA" name="setRecordFieldValue">
                                    <arg name="record" value="record"/>
                                    <arg name="field" value="&quot;idautoDisabled&quot;"/>
                                    <arg name="value" value="true"/>
                                  </action>
                                  <action id="B812C152-2417-7EAD-2720-0AAFBB9EDCCB" name="setVariable">
                                    <arg name="name" value="setDisabled"/>
                                    <arg name="value" value="true"/>
                                  </action>
                                </arg>
                              </action>
                            </arg>
                          </action>
                        </arg>
                      </action>
                      <action id="BACB624B-906C-EAED-187A-F6074113316D" name="section">
                        <arg name="label" value="Save"/>
                        <arg name="do">
                          <action id="B2F66DDE-59B7-1465-C4E1-0AD6F856A7BE" name="section">
                            <arg name="label" value="Testing"/>
                            <arg name="do">
                              <action id="EFFFDBEE-9F32-4B7D-0E9F-0AD6F8572038" name="section">
                                <arg name="label" value="Validate"/>
                                <arg name="do">
                                  <action id="CDBB02A1-9BE0-806F-26A0-0AD6F858A4FF" name="if">
                                    <arg name="condition" value="!assertion"/>
                                    <arg name="then">
                                      <action id="C84AEDD2-4EE4-3BC2-857C-0AD6F859D9C8" name="break">
                                        <arg name="label" value="Testing"/>
                                      </action>
                                    </arg>
                                  </action>
                                </arg>
                              </action>
                              <action id="121A83F2-9C07-4032-5C44-0AD6F85A0CC5" name="return">
                                <arg name="value" value="record"/>
                              </action>
                              <action id="CE9D72E7-3318-185E-40D9-0AF125AF080B" name="continue">
                                <arg name="label" value="IterateRecords"/>
                              </action>
                            </arg>
                          </action>
                          <action id="8E1AB2F0-3FA5-2E51-2F6E-0AC54A850226" name="section">
                            <arg name="label" value="LogOnly"/>
                            <arg name="do">
                              <action id="4A069F82-51F6-2428-68C2-0AC54A868F19" name="if">
                                <arg name="condition" value="!log_only"/>
                                <arg name="then">
                                  <action id="482CFF23-4C2B-A802-BD38-0AC54A873233" name="break">
                                    <arg name="label" value="LogOnly"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="5B6B158D-0D88-EC80-AC6A-0AC54A8863A8" name="log">
                                <arg name="message" value="&quot;UPDATE: &quot; + record"/>
                                <arg name="level" value="&quot;INFO&quot;"/>
                              </action>
                              <action id="D7C94504-FF4E-E103-2C85-0AC5A93F8A05" name="if">
                                <arg name="condition" value="setEnabled"/>
                                <arg name="then">
                                  <action id="B4AAD8B1-99DC-CD2F-5C7E-0AC5CB6CDB9B" name="log">
                                    <arg name="message" value="&quot;ENABLE: &quot; + record"/>
                                    <arg name="level" value="&quot;INFO&quot;"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="DBFACBE9-A976-0BB3-9BFC-0AC5FA3FF9E3" name="if">
                                <arg name="condition" value="setDisabled"/>
                                <arg name="then">
                                  <action id="94A92772-1B48-333D-7560-0AC614C77A98" name="log">
                                    <arg name="message" value="&quot;DISABLE: &quot; + record"/>
                                    <arg name="level" value="&quot;INFO&quot;"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="62D6CFBF-D82A-0A40-CC75-0AC54A8947D3" name="continue">
                                <arg name="label" value="IterateRecords"/>
                              </action>
                            </arg>
                          </action>
                          <action id="A6BCDEED-BC3C-3AB4-0CE9-071E3C2E031D" name="saveLDAPRecord" outputVar="result">
                            <arg name="ldapConnection" value="sessionMeta"/>
                            <arg name="record" value="record"/>
                          </action>
                          <action id="BEA77C98-EEAF-A641-99A7-071E3C2FD408" name="if">
                            <arg name="condition" value="result"/>
                            <arg name="then">
                              <action id="7623A615-DA55-1C3C-B53E-0724BE43E6A9" name="setVariable">
                                <arg name="name" value="counterUpdated"/>
                                <arg name="value" value="counterUpdated + 1"/>
                              </action>
                              <action id="B0BD1DC6-E430-06A0-22B7-071E3C30016C" name="log">
                                <arg name="message" value="&quot;Record updated.&quot;"/>
                                <arg name="level" value="&quot;TRACE&quot;"/>
                              </action>
                              <action id="B353E650-8117-4EE2-1014-0AAD538C9C00" name="logAuditEvent">
                                <arg name="eventName" value="&quot;updateAccount&quot;"/>
                                <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                <arg name="targetID" value="exists[0].idautoID"/>
                                <arg name="target" value="record['@dn']"/>
                                <arg name="perpetratorDN" value="Global.metaUser"/>
                                <arg name="successful" value="true"/>
                                <arg name="extendedProperties" value="changes"/>
                              </action>
                              <action id="857A2AA5-0A47-2FE9-92B9-0AAFE82E16E7" name="if">
                                <arg name="condition" value="setEnabled"/>
                                <arg name="then">
                                  <action id="8FA706A5-5941-313F-1BF6-0ABE431D59DF" name="setVariable">
                                    <arg name="name" value="counterEnabled"/>
                                    <arg name="value" value="counterEnabled + 1"/>
                                  </action>
                                  <action id="97417BAB-0FB2-9FE8-16D8-0AB026DBB7E5" name="logAuditEvent">
                                    <arg name="eventName" value="&quot;enableAccount&quot;"/>
                                    <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                    <arg name="targetID" value="exists[0].idautoID"/>
                                    <arg name="target" value="record['@dn']"/>
                                    <arg name="perpetratorDN" value="Global.metaUser"/>
                                    <arg name="successful" value="true"/>
                                    <arg name="extendedProperties" value="changes"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="D57BB9A0-3C74-0CEB-13A3-0AB0770ED151" name="if">
                                <arg name="condition" value="setDisabled"/>
                                <arg name="then">
                                  <action id="64AD7B21-01B4-96E7-48CC-0ABE728575C3" name="setVariable">
                                    <arg name="name" value="counterDisabled"/>
                                    <arg name="value" value="counterEnabled + 1"/>
                                  </action>
                                  <action id="9BB1DC1D-CBBF-2EEB-9C94-0AB0913A763E" name="logAuditEvent">
                                    <arg name="eventName" value="&quot;disableAccount&quot;"/>
                                    <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                    <arg name="targetID" value="exists[0].idautoID"/>
                                    <arg name="target" value="record['@dn']"/>
                                    <arg name="perpetratorDN" value="Global.metaUser"/>
                                    <arg name="successful" value="true"/>
                                    <arg name="extendedProperties" value="changes"/>
                                  </action>
                                </arg>
                              </action>
                            </arg>
                            <arg name="else">
                              <action id="9C4BA2A6-5703-8CFA-53C2-071E3C3C6051" name="log">
                                <arg name="message" value="&quot;Update failed&quot;"/>
                                <arg name="level" value="&quot;ERROR&quot;"/>
                              </action>
                              <action id="72C14438-3818-CDD9-7608-071E3C3CD178" name="log">
                                <arg name="message" value="record"/>
                                <arg name="level" value="&quot;ERROR&quot;"/>
                              </action>
                              <action id="CD02DA4B-ADAF-AE9D-31E2-0AAE030A09C4" name="logAuditEvent">
                                <arg name="eventName" value="&quot;updateAccount&quot;"/>
                                <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                <arg name="targetID" value="exists[0].idautoID"/>
                                <arg name="target" value="record['@dn']"/>
                                <arg name="perpetratorDN" value="Global.metaUser"/>
                                <arg name="successful" value="false"/>
                                <arg name="extendedProperties" value="changes"/>
                              </action>
                              <action id="1C9C3981-29F4-F793-4299-0AB0CA1FB0B1" name="if">
                                <arg name="condition" value="setEnabled"/>
                                <arg name="then">
                                  <action id="6113634B-A4AA-9DFE-0591-0AB0CA20A265" name="logAuditEvent">
                                    <arg name="eventName" value="&quot;enableAccount&quot;"/>
                                    <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                    <arg name="targetID" value="exists[0].idautoID"/>
                                    <arg name="target" value="record['@dn']"/>
                                    <arg name="perpetratorDN" value="Global.metaUser"/>
                                    <arg name="successful" value="false"/>
                                    <arg name="extendedProperties" value="changes"/>
                                  </action>
                                </arg>
                              </action>
                              <action id="A7A2A93C-E639-1C6E-E5E4-0AB0CA233898" name="if">
                                <arg name="condition" value="setDisabled"/>
                                <arg name="then">
                                  <action id="62194422-AD84-1882-2C3F-0AB0CA23990B" name="logAuditEvent">
                                    <arg name="eventName" value="&quot;disableAccount&quot;"/>
                                    <arg name="targetSystem" value="&quot;MetaDirectory&quot;"/>
                                    <arg name="targetID" value="exists[0].idautoID"/>
                                    <arg name="target" value="record['@dn']"/>
                                    <arg name="perpetratorDN" value="Global.metaUser"/>
                                    <arg name="successful" value="false"/>
                                    <arg name="extendedProperties" value="changes"/>
                                  </action>
                                </arg>
                              </action>
                            </arg>
                          </action>
                        </arg>
                      </action>
                    </arg>
                  </action>
                </arg>
              </action>
            </arg>
          </action>
        </arg>
      </action>
      <action id="13DCD40E-3C26-8FA1-0955-F60741241045" name="section">
        <arg name="label" value="Close"/>
        <arg name="do">
          <action id="0812BFFA-9663-1E1C-DF37-068D8EF94DFA" name="close">
            <arg name="closeable" value="sessionMeta"/>
          </action>
        </arg>
      </action>
      <action id="673BB1E5-36E3-EF7B-FD52-F60741266292" name="section">
        <arg name="label" value="Results"/>
        <arg name="do">
          <action id="E1F51A25-27E8-204D-0C2C-069436225B02" name="log">
            <arg name="message" value="&quot;Total records processed: &quot; + counterTotal"/>
            <arg name="level" value="&quot;INFO&quot;"/>
          </action>
          <action id="E7A177F1-AC86-D838-3850-06BD38333741" name="log">
            <arg name="message" value="&quot;Total records skipped: &quot; + counterSkipped"/>
            <arg name="level" value="&quot;INFO&quot;"/>
          </action>
          <action id="EA62E1FF-9787-288C-3154-0724E56CAAC5" name="log">
            <arg name="message" value="&quot;Total records added: &quot; + counterAdded"/>
            <arg name="level" value="&quot;INFO&quot;"/>
          </action>
          <action id="88636F81-8407-EEDB-59C7-07250B43BCB6" name="log">
            <arg name="message" value="&quot;Total records updated: &quot; + counterUpdated"/>
            <arg name="level" value="&quot;INFO&quot;"/>
          </action>
          <action id="253A6222-6F30-1673-0A2C-0ABDBF28AEBD" name="log">
            <arg name="message" value="&quot;Total records enabled: &quot; + counterEnabled"/>
            <arg name="level" value="&quot;INFO&quot;"/>
          </action>
          <action id="B12FE5E1-25BE-A4A8-619D-0ABDC40C73DE" name="log">
            <arg name="message" value="&quot;Total records disabled: &quot; + counterDisabled"/>
            <arg name="level" value="&quot;INFO&quot;"/>
          </action>
        </arg>
      </action>
    </actions>
  </actionDef>
  <actionDef changeCount="252" modifiedMs="1563477971089" modifiedBy="ed6d4420-44e9-4232-9988-039609164f8b" modifiedByName="Admin" name="TestConnections" category="" builtIn="false" community="false">
    <argDefs/>
    <actions>
      <action id="BBD04187-3682-0D86-1AAA-06849B6ACF6A" name="log">
        <arg name="message" value="Global"/>
        <arg name="level" value="&quot;TRACE&quot;"/>
      </action>
      <action id="D1D74DAF-31D8-F7F4-AA36-05963C19FDE2" name="section">
        <arg name="label" value="BambooHR"/>
        <arg name="do">
          <action id="3ED1A69B-0E21-5118-0995-05C9A7979EC5" name="DefineBambooHRConnection" outputVar="session">
            <arg name="apiKey" value="Global.hrApiKey"/>
            <arg name="tenant" value="Global.hrTenant"/>
          </action>
          <action id="46C687E1-1551-7362-91DF-05CA71CE5829" name="if">
            <arg name="condition" value="!session"/>
            <arg name="then">
              <action id="0FF2E813-C58D-51AC-8E00-05CA9D69A677" name="log">
                <arg name="message" value="&quot;Unable to connect to BambooHR&quot;"/>
                <arg name="level" value="&quot;ERROR&quot;"/>
              </action>
            </arg>
          </action>
          <action id="D28948E6-55AC-C398-EE9F-05CA141E52A2" name="GetBambooHREmployeeRecords" outputVar="records">
            <arg name="session" value="session"/>
          </action>
          <action id="20E4DEB9-F2A9-3AF4-0AB7-05CABCAA09F9" name="log">
            <arg name="message" value="&quot;BambooHR connection success&quot;"/>
            <arg name="color" value="&quot;green&quot;"/>
          </action>
          <action id="2A18705B-4957-2CA0-3C8C-05CABCABDB0B" name="log">
            <arg name="message" value="&quot;Records found: &quot; + records.length"/>
            <arg name="level" value="&quot;TRACE&quot;"/>
          </action>
          <action id="108C08DB-8B23-F7CB-BEE1-05CCFE568ED3" name="forEach" disabled="true">
            <arg name="variable" value="record"/>
            <arg name="collection" value="records"/>
            <arg name="do">
              <action id="FEF6AE80-1E21-4B48-C643-05CD2C776140" name="log">
                <arg name="message" value="record"/>
                <arg name="level" value="&quot;DEBUG&quot;"/>
              </action>
            </arg>
          </action>
        </arg>
      </action>
      <action id="CD412E55-5A54-8609-5D23-0687C2DDA5A0" name="section">
        <arg name="label" value="MetaDirectory"/>
        <arg name="do">
          <action id="E1900AF3-E03E-431B-A5BE-06880FC1629C" name="openLDAPConnection" outputVar="session">
            <arg name="ldapHost" value="Global.metaHost"/>
            <arg name="ldapPort" value="Global.metPort"/>
            <arg name="useSSL" value="Global.metaSSL"/>
            <arg name="userDn" value="Global.metaUser"/>
            <arg name="password" value="Global.metaPwd"/>
          </action>
          <action id="0CE463FC-67DD-6616-99C7-0687C2E0F3F9" name="if">
            <arg name="condition" value="!session"/>
            <arg name="then">
              <action id="4C7CD2FE-1575-9174-0DCC-0687C2E03989" name="log">
                <arg name="message" value="&quot;Unable to connect to MetaDirectory&quot;"/>
                <arg name="level" value="&quot;ERROR&quot;"/>
              </action>
            </arg>
          </action>
          <action id="800BA44E-F8A1-36F1-29DD-0687C2E210C6" name="log">
            <arg name="message" value="&quot;MetaDirectory connection success&quot;"/>
            <arg name="color" value="&quot;green&quot;"/>
          </action>
          <action id="9DA80003-0C1D-1E8B-9AE2-068B259294A4" name="getLDAPRecords" outputVar="records">
            <arg name="ldapConnection" value="session"/>
            <arg name="baseDn" value="Global.metaBaseDn"/>
            <arg name="scope" value="&quot;sub&quot;"/>
            <arg name="filter" value="&quot;(idautoID=*)&quot;"/>
          </action>
          <action id="50247E64-0DE3-F0F6-903F-0687C2E39F40" name="log">
            <arg name="message" value="&quot;Records found: &quot; + records.length"/>
            <arg name="level" value="&quot;TRACE&quot;"/>
          </action>
          <action id="1F9C67A7-BCC4-2AF6-C58A-0687C2E4B2C8" name="forEach" disabled="true">
            <arg name="variable" value="record"/>
            <arg name="collection" value="records"/>
            <arg name="do">
              <action id="1C672427-983B-0A81-8351-0687C2E50F3A" name="log">
                <arg name="message" value="record"/>
                <arg name="level" value="&quot;DEBUG&quot;"/>
              </action>
            </arg>
          </action>
        </arg>
      </action>
    </actions>
  </actionDef>
  <actionDef changeCount="301" modifiedMs="1563564287148" modifiedBy="ed6d4420-44e9-4232-9988-039609164f8b" modifiedByName="Admin" name="TestILMBambooHRToMetaDirectory" category="" builtIn="false" community="false">
    <argDefs/>
    <actions>
      <action id="5DCB9922-8AC0-F3EF-6B99-0AEA28EFAB1A" name="listFiles" outputVar="files">
        <arg name="path" value="&quot;/TestCases/ILMBambooHRToMetaDirectory&quot;"/>
      </action>
      <action id="96323D55-4531-90E3-4996-0AEC9B6F0DC5" name="forEach">
        <arg name="variable" value="file"/>
        <arg name="collection" value="files"/>
        <arg name="do">
          <action id="04B24755-2D44-B399-1DCB-0AECD85FDC38" name="log">
            <arg name="message" value="&quot;TEST FILE: &quot; + file"/>
            <arg name="color" value="&quot;brown&quot;"/>
          </action>
          <action id="68395787-A391-6647-E27F-0AED1687C552" name="loadFileAsString" outputVar="assertion">
            <arg name="path" value="file"/>
          </action>
          <action id="BA4A6BBD-1B25-2CD4-4E6E-0AED7617FFD4" name="parseJSON" outputVar="assertion">
            <arg name="json" value="assertion"/>
          </action>
          <action id="E260ED2C-3D51-EBB6-7E45-0AFACCE9775F" name="forEach">
            <arg name="variable" value="test"/>
            <arg name="collection" value="assertion.tests"/>
            <arg name="do">
              <action id="702CAC78-F0E8-999C-4679-0BAF9DAE8D74" name="log">
                <arg name="message" value="&quot;TEST CASE: &quot; + test.name"/>
                <arg name="color" value="&quot;brown&quot;"/>
              </action>
              <action id="21AADA13-40A5-05A4-37F0-0AEDBD373C72" name="ILMBambooHRToMetaDirectory" outputVar="recordOutputActual">
                <arg name="assertion" value="test"/>
              </action>
              <action id="C87D3DE9-75B9-389C-58CF-0AF792502F45" name="createRecordFromObject" outputVar="recordOutputExpected">
                <arg name="seed" value="test.output"/>
              </action>
              <action id="9F01A046-5E61-77C3-9496-0AF7E6E83319" name="FnHasRecordChanged" outputVar="changes">
                <arg name="new_record" value="recordOutputExpected"/>
                <arg name="old_record" value="recordOutputActual"/>
              </action>
              <action id="EF5BBDB0-A9C3-5E76-D95E-0AF84770D384" name="if">
                <arg name="condition" value="!changes"/>
                <arg name="then">
                  <action id="3436D149-0B58-A507-8C54-0AF87118D056" name="log">
                    <arg name="message" value="&quot;PASS&quot;"/>
                    <arg name="color" value="&quot;green&quot;"/>
                  </action>
                </arg>
                <arg name="else">
                  <action id="7C351D6A-939D-5690-F3F1-0AF8A22D44E5" name="log">
                    <arg name="message" value="&quot;FAIL&quot;"/>
                    <arg name="color" value="&quot;red&quot;"/>
                  </action>
                  <action id="BB94971E-2834-7C85-E9E9-0AF8CEF61D1A" name="log">
                    <arg name="message" value="&quot;DELTAS: &quot; + changes"/>
                    <arg name="color" value="&quot;red&quot;"/>
                  </action>
                </arg>
              </action>
            </arg>
          </action>
        </arg>
      </action>
    </actions>
  </actionDef>
</actionDefs>